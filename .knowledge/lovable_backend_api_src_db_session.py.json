{"is_source_file": true, "format": "Python", "description": "This file manages asynchronous database sessions and transactions using SQLAlchemy 2.x with async support. It configures an async engine, sessionmaker, and provides helper functions for session management and transactional execution within an async context.", "external_files": ["src.core.config"], "external_methods": ["src.core.config.get_settings"], "published": ["get_async_session", "run_in_transaction"], "classes": [{"name": "AsyncEngine", "description": "Represents the asynchronous database engine created via create_async_engine."}, {"name": "AsyncSession", "description": "Represents an asynchronous session for database interactions."}, {"name": "async_sessionmaker", "description": "Factory for creating AsyncSession instances configured with the engine."}], "methods": [{"name": "AsyncIterator[AsyncSession] get_async_session()", "description": "Async generator providing a managed AsyncSession with proper lifecycle and rollback on exceptions.", "scope": "", "scopeKind": ""}, {"name": "\"Optional[object]\" run_in_transaction( fn: Callable[[AsyncSession], \"Optional[object]\"], )", "description": "Executes a callback function within a transaction, ensuring commit on success and rollback on exception.", "scope": "", "scopeKind": ""}], "calls": ["create_async_engine", "async_sessionmaker", "get_settings", "asynccontextmanager", "session.rollback", "session.commit"], "search-terms": ["async SQLAlchemy session", "transaction management", "async engine creation", "sessionmaker", "database URL"], "state": 2, "file_id": 6, "knowledge_revision": 20, "git_revision": "1973d3c61f5b80804aaaad34ee22d8ec3c6bb289", "revision_history": [{"15": ""}, {"20": "1973d3c61f5b80804aaaad34ee22d8ec3c6bb289"}], "ctags": [{"_type": "tag", "name": "ASYNC_SESSION_MAKER", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/db/session.py", "pattern": "/^ASYNC_SESSION_MAKER: async_sessionmaker[AsyncSession] = async_sessionmaker($/", "language": "Python", "typeref": "typename:async_sessionmaker[AsyncSession]", "kind": "variable"}, {"_type": "tag", "name": "ENGINE", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/db/session.py", "pattern": "/^ENGINE: AsyncEngine = create_async_engine($/", "language": "Python", "typeref": "typename:AsyncEngine", "kind": "variable"}, {"_type": "tag", "name": "_settings", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/db/session.py", "pattern": "/^_settings = get_settings()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_async_session", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/db/session.py", "pattern": "/^async def get_async_session() -> AsyncIterator[AsyncSession]:$/", "language": "Python", "typeref": "typename:AsyncIterator[AsyncSession]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "run_in_transaction", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/db/session.py", "pattern": "/^async def run_in_transaction($/", "language": "Python", "typeref": "typename:\"Optional[object]\"", "kind": "function", "signature": "( fn: Callable[[AsyncSession], \"Optional[object]\"], )"}], "hash": "c73ad973d5cd79f859e2b27f527955a0", "format-version": 4, "code-base-name": "lovable_backend_api", "filename": "lovable_backend_api/src/db/session.py", "fields": [{"name": "async_sessionmaker[AsyncSession] ASYNC_SESSION_MAKER", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "AsyncEngine ENGINE", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_settings = get_settings()", "scope": "", "scopeKind": "", "description": "unavailable"}]}