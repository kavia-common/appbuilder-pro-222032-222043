{"is_source_file": true, "format": "Python", "description": "This file defines API routes for a chat session management system using FastAPI. It supports creating, listing, retrieving, and deleting chat sessions, as well as managing chat messages within those sessions. The data is stored in-memory using dictionaries.", "external_files": ["src.routers.auth"], "external_methods": ["get_current_user"], "published": ["list_sessions", "create_session", "get_session", "delete_session", "list_messages", "create_message"], "classes": [{"name": "ChatSessionCreate", "description": "Data model for creating a new chat session."}, {"name": "ChatSession", "description": "Data model representing a chat session."}, {"name": "ChatMessageCreate", "description": "Data model for creating a new chat message."}, {"name": "ChatMessage", "description": "Data model representing a chat message."}], "methods": [{"name": "Dict[str,ChatSession] _get_sessions(email: str)", "description": "Retrieve or initialize the dictionary of chat sessions for a specific user email.", "scope": "", "scopeKind": ""}, {"name": "ChatSession _get_session_or_404(email: str, session_id: str)", "description": "Retrieve a specific chat session for a user, raising 404 if not found.", "scope": "", "scopeKind": ""}, {"name": "List[ChatMessage] _get_messages(session_id: str)", "description": "Retrieve or initialize the list of messages for a specific chat session.", "scope": "", "scopeKind": ""}, {"name": "ChatMessage create_message( session_id: str = Path(..., description=\"Chat session ID\"), payload: ChatMessageCreate = ..., current_user: UserPublic = Depends(get_current_user), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ChatSession create_session( payload: ChatSessionCreate, current_user: UserPublic = Depends(get_current_user), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None delete_session( session_id: str = Path(..., description=\"Chat session ID\"), current_user: UserPublic = Depends(get_current_user), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ChatSession get_session( session_id: str = Path(..., description=\"Chat session ID\"), current_user: UserPublic = Depends(get_current_user), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[ChatMessage] list_messages( session_id: str = Path(..., description=\"Chat session ID\"), current_user: UserPublic = Depends(get_current_user), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[ChatSession] list_sessions(current_user: UserPublic = Depends(get_current_user))", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["uuid.uuid4", "list", "pop", "Depends", "Path", "HTTPException", "status.HTTP_201_CREATED", "status.HTTP_204_NO_CONTENT"], "search-terms": ["chat sessions API", "FastAPI chat router", "chat message management", "in-memory chat store", "session CRUD endpoints"], "state": 2, "file_id": 13, "knowledge_revision": 33, "git_revision": "", "ctags": [{"_type": "tag", "name": "ChatMessage", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^class ChatMessage(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ChatMessageCreate", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^class ChatMessageCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ChatSession", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^class ChatSession(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ChatSessionCreate", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^class ChatSessionCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_MESSAGES", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^_MESSAGES: Dict[str, List[\"ChatMessage\"]] = {}  # key: session_id$/", "language": "Python", "typeref": "typename:Dict[str, List[\"ChatMessage\"]]", "kind": "variable"}, {"_type": "tag", "name": "_SESSIONS", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^_SESSIONS: Dict[str, Dict[str, \"ChatSession\"]] = {}$/", "language": "Python", "typeref": "typename:Dict[str, Dict[str, \"ChatSession\"]]", "kind": "variable"}, {"_type": "tag", "name": "_get_messages", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^def _get_messages(session_id: str) -> List[ChatMessage]:$/", "language": "Python", "typeref": "typename:List[ChatMessage]", "kind": "function", "signature": "(session_id: str)"}, {"_type": "tag", "name": "_get_session_or_404", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^def _get_session_or_404(email: str, session_id: str) -> ChatSession:$/", "language": "Python", "typeref": "typename:ChatSession", "kind": "function", "signature": "(email: str, session_id: str)"}, {"_type": "tag", "name": "_get_sessions", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^def _get_sessions(email: str) -> Dict[str, ChatSession]:$/", "language": "Python", "typeref": "typename:Dict[str,ChatSession]", "kind": "function", "signature": "(email: str)"}, {"_type": "tag", "name": "chat_session_id", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^    chat_session_id: str = Field(..., description=\"Session ID\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ChatMessage", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^    content: str = Field(..., description=\"Content\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ChatMessage", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^    content: str = Field(..., description=\"Message content\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ChatMessageCreate", "scopeKind": "class"}, {"_type": "tag", "name": "create_message", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^async def create_message($/", "language": "Python", "typeref": "typename:ChatMessage", "kind": "function", "signature": "( session_id: str = Path(..., description=\"Chat session ID\"), payload: ChatMessageCreate = ..., current_user: UserPublic = Depends(get_current_user), )"}, {"_type": "tag", "name": "create_session", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^async def create_session($/", "language": "Python", "typeref": "typename:ChatSession", "kind": "function", "signature": "( payload: ChatSessionCreate, current_user: UserPublic = Depends(get_current_user), )"}, {"_type": "tag", "name": "delete_session", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^async def delete_session($/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "( session_id: str = Path(..., description=\"Chat session ID\"), current_user: UserPublic = Depends(get_current_user), )"}, {"_type": "tag", "name": "get_session", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^async def get_session($/", "language": "Python", "typeref": "typename:ChatSession", "kind": "function", "signature": "( session_id: str = Path(..., description=\"Chat session ID\"), current_user: UserPublic = Depends(get_current_user), )"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^    id: str = Field(..., description=\"Message ID\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ChatMessage", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^    id: str = Field(..., description=\"Session ID\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ChatSession", "scopeKind": "class"}, {"_type": "tag", "name": "list_messages", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^async def list_messages($/", "language": "Python", "typeref": "typename:List[ChatMessage]", "kind": "function", "signature": "( session_id: str = Path(..., description=\"Chat session ID\"), current_user: UserPublic = Depends(get_current_user), )"}, {"_type": "tag", "name": "list_sessions", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^async def list_sessions(current_user: UserPublic = Depends(get_current_user)) -> List[ChatSessio/", "language": "Python", "typeref": "typename:List[ChatSession]", "kind": "function", "signature": "(current_user: UserPublic = Depends(get_current_user))"}, {"_type": "tag", "name": "project_id", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^    project_id: Optional[str] = Field(None, description=\"Associated project id\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ChatSession", "scopeKind": "class"}, {"_type": "tag", "name": "project_id", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^    project_id: Optional[str] = Field(None, description=\"Associated project id\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ChatSessionCreate", "scopeKind": "class"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^    role: str = Field(..., description=\"Role: user|assistant|system\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ChatMessageCreate", "scopeKind": "class"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^    role: str = Field(..., description=\"Role\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ChatMessage", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^router = APIRouter($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^    status: str = Field(\"active\", description=\"Session status\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ChatSession", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^    title: Optional[str] = Field(None, description=\"Optional session title\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ChatSessionCreate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/appbuilder-pro-222032-222043/lovable_backend_api/src/routers/chat.py", "pattern": "/^    title: Optional[str] = Field(None, description=\"Session title\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ChatSession", "scopeKind": "class"}], "hash": "2eae2006ff74749ddb97efbe3c18d845", "format-version": 4, "code-base-name": "lovable_backend_api", "filename": "lovable_backend_api/src/routers/chat.py", "fields": [{"name": "Dict[str, List[\"ChatMessage\"]] _MESSAGES", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str, Dict[str, \"ChatSession\"]] _SESSIONS", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str chat_session_id", "scope": "ChatMessage", "scopeKind": "class", "description": "unavailable"}, {"name": "str content", "scope": "ChatMessage", "scopeKind": "class", "description": "unavailable"}, {"name": "str id", "scope": "ChatMessage", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] project_id", "scope": "ChatSession", "scopeKind": "class", "description": "unavailable"}, {"name": "str role", "scope": "ChatMessageCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str status", "scope": "ChatSession", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] title", "scope": "ChatSessionCreate", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"33": ""}]}